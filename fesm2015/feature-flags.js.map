{"version":3,"file":"feature-flags.js","sources":["ng://@datagazer/feature-flags/lib/services/feature-flags.service.ts","ng://@datagazer/feature-flags/lib/directives/feature-flag.directive.ts","ng://@datagazer/feature-flags/lib/guards/feature-flag.guard.ts","ng://@datagazer/feature-flags/lib/feature-flags.module.ts","ng://@datagazer/feature-flags/public-api.ts","ng://@datagazer/feature-flags/feature-flags.ts"],"sourcesContent":["import { Inject, Injectable, InjectionToken } from '@angular/core';\nimport { FeatureFlags } from '../types/feature-flags';\n\nexport const FEATURE_FLAGS = new InjectionToken<FeatureFlags>('Feature Flags');\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FeatureFlagsService {\n  constructor(\n    @Inject(FEATURE_FLAGS)\n    private readonly _featureFlags: FeatureFlags\n  ) {}\n\n  public isEnabled(feature: string): boolean {\n    return Boolean(this._featureFlags[feature]);\n  }\n}\n","import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { FeatureFlagsService } from '../services/feature-flags.service';\n\n@Directive({\n  selector: '[dgFeatureFlag]'\n})\nexport class FeatureFlagDirective {\n  @Input()\n  public set dgFeatureFlag(feature: string) {\n    this._viewContainerRef.clear();\n\n    if (this._featureFlags.isEnabled(feature)) {\n      this._viewContainerRef.createEmbeddedView(this._templateRef);\n    }\n  }\n\n  constructor(\n    private readonly _templateRef: TemplateRef<never>,\n    private readonly _viewContainerRef: ViewContainerRef,\n\n    private readonly _featureFlags: FeatureFlagsService\n  ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { FeatureFlagsService } from '../services/feature-flags.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FeatureFlagGuard implements CanActivate {\n  constructor(\n    private readonly _featureFlags: FeatureFlagsService\n  ) {}\n\n  public canActivate({ data: { feature } }: ActivatedRouteSnapshot): boolean {\n    return this._featureFlags.isEnabled(feature);\n  }\n}\n","import { NgModule } from '@angular/core';\n\n// Modules\nimport { FoundationModule } from '@datagazer/foundation';\n\nconst modules = [\n  FoundationModule\n];\n\n// Directives\nimport { FeatureFlagDirective } from './directives/feature-flag.directive';\n\nconst directives = [\n  FeatureFlagDirective\n];\n\n@NgModule({\n  imports: [\n    ...modules\n  ],\n\n  declarations: [\n    ...directives\n  ],\n\n  exports: [\n    ...modules,\n    ...directives\n  ]\n})\nexport class FeatureFlagsModule {}\n","// Directives\nexport * from './lib/directives/feature-flag.directive';\n\n// Guards\nexport * from './lib/guards/feature-flag.guard';\n\n// Services\nexport * from './lib/services/feature-flags.service';\n\n// Types\nexport * from './lib/types/feature-flags';\n\n// Module\nexport * from './lib/feature-flags.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;MAGa,aAAa,GAAG,IAAI,cAAc,CAAe,eAAe,CAAC,CAAC;AAK/E,MAAa,mBAAmB;IAC9B,YAEmB,aAA2B;QAA3B,kBAAa,GAAb,aAAa,CAAc;KAC1C;IAEG,SAAS,CAAC,OAAe;QAC9B,OAAO,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC;KAC7C;;;YAXF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;4CAGI,MAAM,SAAC,aAAa;;;;MCJZ,oBAAoB;IAU/B,YACmB,YAAgC,EAChC,iBAAmC,EAEnC,aAAkC;QAHlC,iBAAY,GAAZ,YAAY,CAAoB;QAChC,sBAAiB,GAAjB,iBAAiB,CAAkB;QAEnC,kBAAa,GAAb,aAAa,CAAqB;KACjD;IAdJ,IACW,aAAa,CAAC,OAAe;QACtC,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;QAE/B,IAAI,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;YACzC,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAC9D;KACF;;;YAXF,SAAS,SAAC;gBACT,QAAQ,EAAE,iBAAiB;aAC5B;;;;YAL0B,WAAW;YAAE,gBAAgB;YAC/C,mBAAmB;;;4BAMzB,KAAK;;;MCAK,gBAAgB;IAC3B,YACmB,aAAkC;QAAlC,kBAAa,GAAb,aAAa,CAAqB;KACjD;IAEG,WAAW,CAAC,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,EAA0B;QAC9D,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;KAC9C;;;YAVF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;YAJQ,mBAAmB;;;;ACG5B,MAAM,OAAO,GAAG;IACd,gBAAgB;CACjB,CAAC;AAEF,AAGA,MAAM,UAAU,GAAG;IACjB,oBAAoB;CACrB,CAAC;AAgBF,MAAa,kBAAkB;;;YAd9B,QAAQ,SAAC;gBACR,OAAO,EAAE;oBACP,GAAG,OAAO;iBACX;gBAED,YAAY,EAAE;oBACZ,GAAG,UAAU;iBACd;gBAED,OAAO,EAAE;oBACP,GAAG,OAAO;oBACV,GAAG,UAAU;iBACd;aACF;;;AC7BD,aAAa;;ACAb;;GAEG;;;;"}